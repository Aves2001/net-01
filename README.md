
# 1.1
## Встановлення залежностей через **NuGet Package Manager Console**:
```PowerShell
Install-Package Microsoft.Data.SqlClient
Install-Package System.Data.SqlClient
```



## Пояснення роботи
При відкритті програми, користувача повідомляється що встановлення з базою даних відбулось успішно, в іншому випадку відобразиться помилка яку користувач може надати системному адміністратору
наприклад щоб системному адміністратору не прийшлось витрачати час та кошти 

# 1.2
### Завдання 1.2: **Визначити сукупність таблиць (окрема база даних – SQL (Microsoft SQL Server)) з якими буде відбуватись робота в розрізі проекту №2 (багатошарова архітектура)**, в основі роботи якого буде використаний функціонал **Entity Framework**. При цьому дана база даних буде створюватись у наближенні **CodeFirst підходу** та можливостей **Fluent API**.

### Етапи виконання завдання:

1. Створимо новий проект для роботи з Entity Framework, де використовуватимемо CodeFirst підхід.
2. Реалізуємо базу даних, використовуючи Entity Framework та Fluent API.
3. Реалізуємо модель даних для книг та користувачів, а також зв'язки між ними.

### Крок 1: Створення нового проекту

Створимо проект у **Visual Studio 2022**:

1. Виберіть **File > New > Project**.
2. Оберіть **ASP.NET Core Web Application** або **Console App** для простоти (можна використати інші шаблони за потреби).
3. Назвемо проект, наприклад, **LibraryManagementSystem-Task2**.

### Крок 2: Додання пакета Entity Framework

1. Відкрийте **Package Manager Console** і виконайте наступні команди для встановлення **Entity Framework Core** та **SQL Server провайдера**:
```bash
Install-Package Microsoft.EntityFrameworkCore
Install-Package Microsoft.EntityFrameworkCore.SqlServer
Install-Package Microsoft.EntityFrameworkCore.Tools
```

Виконати міграцію
```
Add-Migration InitialCreate
Update-Database

```

Щоб перевірити працездатність усіх компонентів вашого коду, вам потрібно виконати кілька запитів за допомогою **Postman** або **Swagger**. Ось покрокові запити для кожної функції вашого API, включаючи додавання користувача, книги, позичення книг, повернення книг та отримання списків.

### 1. **POST: Додавання нового користувача**

**URL**: `POST http://localhost:7099/api/users`

**Тіло запиту (JSON)**:
```
{
"Name": "John Doe",
"Email": "john.doe@example.com",
"Phone": "123-456-7890"
}

```

### 2. **POST: Додавання нової книги**

**URL**: `POST http://localhost:7099/api/books`

**Тіло запиту (JSON)**:
```
{
    "Title": "C# Programming",
    "Author": "John Sharp",
    "Available": 5
}
```
### 3. **POST: Позичення книги**

**URL**: `POST http://localhost:7099/api/borrowedbooks`

**Тіло запиту (JSON)**:

- Використовуйте ID користувача та книги, які ви створили в попередніх запитах.
```
{
    "UserId": 1,  // ID користувача, який позичає книгу
    "BookId": 1   // ID книги, яку позичають
}
```
### 4. **POST: Повернення книги**
**URL**: `POST http://localhost:7099/api/borrowedbooks/return`
**Тіло запиту (JSON)**:
```
{
    "UserId": 1,  // ID користувача, який повертає книгу
    "BookId": 1   // ID книги, яку повертають
}
```
### 5. **GET: Отримання всіх позичених книг**

**URL**: `GET http://localhost:7099/api/borrowedbooks`

Цей запит поверне список всіх позичених книг, включаючи дані про користувачів та книги.

### 6. **GET: Отримання книг, позичених конкретним користувачем**

**URL**: `GET http://localhost:7099/api/users/1/borrowedbooks`

Цей запит поверне всі книги, які позичив користувач з ID **1**.

### 7. **GET: Отримання всіх користувачів**

**URL**: `GET http://localhost:7099/api/users`

Цей запит поверне список усіх користувачів.

### 8. **GET: Отримання всіх книг**

**URL**: `GET http://localhost:7099/api/books`

Цей запит поверне список усіх книг у бібліотеці.

# 3
### Основні кроки для виконання завдання:

1. **Встановлення MongoDB**:
    
    - Завантажте та встановіть [MongoDB](https://www.mongodb.com/try/download/community) на свій комп'ютер. Слідкуйте за інструкціями для вашої операційної системи.
2. **Створення нового проекту**:
    
    - У **Visual Studio 2022** створіть новий проект **ASP.NET Core Web API**.
3. **Додайте NuGet пакети для MongoDB**:
    
    - Відкрийте **Package Manager Console** та виконайте команду:
```
Install-Package MongoDB.Driver
```

3. Щоб продемонструвати роботу програми згідно з умовами завдання для MongoDB, переконайтеся, що у вас є доступ до API і що база даних MongoDB підключена та працює належним чином. Нижче наведена покрокова інструкція для перевірки основних функцій програми.

### Крок 1: Підготовка середовища

1. **Запуск MongoDB**:
   - Переконайтеся, що MongoDB запущено. Якщо ви використовуєте Windows, MongoDB повинен бути запущений як служба або через команду `mongod --dbpath "C:\data\db"` (вкажіть свій шлях до бази даних).

2. **Запуск API**:
   - Запустіть програму в Visual Studio або через термінал, якщо програма була зібрана в `.exe`.
   - Переконайтеся, що у консолі ви бачите повідомлення `Now listening on: http://localhost:{порт}`. Це означає, що сервер API працює.

3. **Відкрити Swagger або Postman**:
   - Якщо API підтримує Swagger, відкрийте `https://localhost:{порт}/swagger` для доступу до документованого інтерфейсу.
   - В іншому випадку використовуйте **Postman** для надсилання запитів до API.

### Крок 2: Тестування функціональності `UsersController`

#### 2.1. Отримати всіх користувачів (GET `/api/Users`)
   - Надішліть GET-запит на:
     ```
     GET https://localhost:{порт}/api/Users
     ```
   - Очікуваний результат: Відображення списку користувачів, якщо такі є у базі даних. Якщо база даних порожня, ви отримаєте порожній масив.

#### 2.2. Додати нового користувача (POST `/api/Users`)
   - Надішліть POST-запит із таким JSON-телом:
     ```json
     {
       "name": "John Doe",
       "email": "john.doe@example.com",
       "phone": "123-456-7890"
     }
     ```
   - Очікуваний результат: Відповідь зі статусом `201 Created` та доданим користувачем з автоматично згенерованим полем `Id`.

### Крок 3: Тестування функціональності `BooksController`

#### 3.1. Отримати всі книги (GET `/api/Books`)
   - Надішліть GET-запит на:
     ```
     GET https://localhost:{порт}/api/Books
     ```
   - Очікуваний результат: Відображення списку книг. Якщо база даних порожня, повернеться порожній масив.

#### 3.2. Додати нову книгу (POST `/api/Books`)
   - Надішліть POST-запит із таким JSON-телом:
     ```json
     {
       "title": "C# Programming",
       "author": "Jane Doe",
       "available": 10
     }
     ```
   - Очікуваний результат: Відповідь зі статусом `201 Created` та доданою книгою з автоматично згенерованим полем `Id`.

### Крок 4: Перевірка помилок

1. **Неправильний запит**: Спробуйте надіслати POST-запит без одного з обов'язкових полів (наприклад, без `title` у книзі). Ви маєте отримати статус `400 Bad Request` з інформацією про відсутні поля.
2. **Перевірка унікальності `Id`**: Переконайтеся, що кожен запис у базі даних отримує унікальне `Id`, згенероване MongoDB.

### Крок 5: Демонстрація кінцевого результату

1. Покажіть доданих користувачів та книги, зробивши GET-запити до `/api/Users` та `/api/Books`.
2. Поясніть, що MongoDB автоматично обробляє поле `Id`, і кожен доданий запис (користувач чи книга) отримує унікальний ідентифікатор.

Ці кроки продемонструють базову функціональність програми, що відповідає умовам задачі.